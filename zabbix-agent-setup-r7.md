üîß 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zabbix Agent –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
1.1 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ö–æ—Å—Ç—É
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
ssh youruser@your-hostname-or-ip
sudo -i

1.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zabbix Agent 2
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
wget https://repo.zabbix.com/zabbix/7.0/debian/pool/main/z/zabbix-release/zabbix-release_7.0-2+debian10_all.deb
dpkg -i zabbix-release_7.0-2+debian10_all.deb
apt update -y
apt install -y zabbix-agent2 -t buster

1.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≥–µ–Ω—Ç–∞
–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª /etc/zabbix/zabbix_agent2.conf –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

ini
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
Server=your-zabbix-server-hostname-or-ip
ServerActive=your-zabbix-server-hostname-or-ip
ListenPort=10050
‚ö†Ô∏è –ó–∞–º–µ–Ω–∏—Ç–µ your-zabbix-server-hostname-or-ip –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–º—è —Ö–æ—Å—Ç–∞ –∏–ª–∏ IP –≤–∞—à–µ–≥–æ Zabbix-—Å–µ—Ä–≤–µ—Ä–∞.

1.4 –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
systemctl enable zabbix-agent2 --now
systemctl status zabbix-agent2

üì• 2. –ò–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–æ–≤ R7
2.1 –°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω—ã
–ó–∞–≥—Ä—É–∑–∏—Ç–µ YAML-—à–∞–±–ª–æ–Ω—ã R7 —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞:

üìé –°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω—ã R7 Office - https://nct.r7-office.ru/doc.html?uid=6f09a860-ab44-4094-82e4-5661da39e6ca_1177983

–û–±—ã—á–Ω–æ —Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è CS_2024_templates.yml.

2.2 –ò–º–ø–æ—Ä—Ç –≤ Zabbix
–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Zabbix:
http://your-zabbix-server-hostname:8080

–ü–µ—Ä–µ–π–¥–∏—Ç–µ:
Configuration ‚Üí Templates ‚Üí Import

–ù–∞–∂–º–∏—Ç–µ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª, –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π .yml.

–û—Ç–º–µ—Ç—å—Ç–µ ¬´–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏¬ª ‚Üí –ò–º–ø–æ—Ä—Ç.

üß© 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–∞ CS 2024
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Zabbix:
Configuration ‚Üí Templates ‚Üí CS 2024

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Macros ‚Üí Inherited and host macros.

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –º–∞–∫—Ä–æ—Å—ã:

Macro	Value
{$CALENDAR}	r7calendar
{$CDADMIN}	r7admin
{$CDDISK}	r7disk
{$CDMAIL}	r7mail
{$CONTACTS}	r7contacts
{$DOMAIN}	yourdomain.local
{$DRAW}	draw
{$DS}	ds
{$PROJECTS}	r7projects
{$R7_PASSWORD}	youradminpass
{$R7_USERNAME}	youradminuser
{$SHEMA}	https
‚ö†Ô∏è –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è youradminuser, youradminpass, yourdomain.local –Ω–∞ —Å–≤–æ–∏.


‚ûï 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞ —Å–µ—Ç–∏
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Zabbix:
Monitoring ‚Üí Hosts ‚Üí Create host

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:

–ü–æ–ª–µ	–ó–Ω–∞—á–µ–Ω–∏–µ
–ò–º—è —É–∑–ª–∞	Community Server R7
–ì—Ä—É–ø–ø—ã —É–∑–ª–æ–≤	Applications, Linux servers
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–≥–µ–Ω—Ç–∞	DNS: your-agent-hostname
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ	–ü–æ DNS
–î–æ–±–∞–≤—å—Ç–µ —à–∞–±–ª–æ–Ω:

–ì—Ä—É–ø–ø–∞ —à–∞–±–ª–æ–Ω–æ–≤: r7-office

–ò–º—è —à–∞–±–ª–æ–Ω–∞: CS 2024

–ù–∞–∂–º–∏—Ç–µ –î–æ–±–∞–≤–∏—Ç—å

‚úÖ –ì–æ—Ç–æ–≤–æ!
–ß–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –∞–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –∞ –∏–∫–æ–Ω–∫–∞ —É–∑–ª–∞ –≤ —Å–ø–∏—Å–∫–µ —Å—Ç–∞–Ω–µ—Ç –∑–µ–ª—ë–Ω–æ–π. –ù–∞ –¥–∞—à–±–æ—Ä–¥–µ Zabbix –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≥—Ä–∞—Ñ–∏–∫–µ (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å ¬´–ì—Ä–∞—Ñ–∏–∫–∞¬ª –≤ R7 ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ).

üõ° –ü–æ–¥—Å–∫–∞–∑–∫–∏
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 10050 –æ—Ç–∫—Ä—ã—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –∞–≥–µ–Ω—Ç–æ–º.

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ SELinux/AppArmor ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏.

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å zabbix_get –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—è–∑–∏ —Å –∞–≥–µ–Ω—Ç–æ–º.

